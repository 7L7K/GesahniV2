# Backend configuration

# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_TRANSCRIBE_MODEL=whisper-1
WHISPER_MODEL=whisper-1

# LLaMA / Ollama
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3:latest
OLLAMA_FORCE_IPV6=0
LLAMA_MAX_STREAMS=2

# Routing
DETERMINISTIC_ROUTER=1
ROUTER_RULES_PATH=router_rules.yaml
ALLOWED_GPT_MODELS=gpt-4o,gpt-4,gpt-3.5-turbo
ALLOWED_LLAMA_MODELS=llama3:latest,llama3
MODEL_ROUTER_HEAVY_WORDS=30
MODEL_ROUTER_HEAVY_TOKENS=1000

# Auth & security
JWT_SECRET=change-me
JWT_EXPIRE_MINUTES=30
JWT_REFRESH_EXPIRE_MINUTES=1440
RATE_LIMIT_PER_MIN=60

# Cookie configuration
# Secure: true for production, false for dev HTTP
COOKIE_SECURE=0
# SameSite: lax, strict, or none
COOKIE_SAMESITE=lax
# Development mode: forces Secure=false when scheme=http
DEV_MODE=1
# Rate limit backend: memory | redis
RATE_LIMIT_BACKEND=memory
# Optional: override Redis key prefix for rate limit buckets
RATE_LIMIT_REDIS_PREFIX=rl
# Optional: bypass rate limits for requests carrying any of these scopes (spaceâ€‘separated)
RATE_LIMIT_BYPASS_SCOPES=
# Optional: daily cap per user (resets midnight UTC). 0 disables.
DAILY_REQUEST_CAP=0
API_TOKEN=

# Server
# Single frontend origin for CORS - use exactly one origin
CORS_ALLOW_ORIGINS=http://localhost:3000
PORT=8000
SESSIONS_DIR=sessions
ALBUM_ART_DIR=data/album_art

# Optional admin for /config
ADMIN_TOKEN=

# Home Assistant
HOME_ASSISTANT_URL=http://localhost:8123
HOME_ASSISTANT_TOKEN=

# Music / Providers
PROVIDER_SPOTIFY=true
MUSIC_FALLBACK_RADIO=false
EXPLICIT_DEFAULT=true
QUIET_HOURS_START=22:00
QUIET_HOURS_END=07:00
MUSIC_DB=music.db
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
# Optional: process-wide refresh token for single-user setups
SPOTIFY_REFRESH_TOKEN=
FALLBACK_RADIO_URL=http://127.0.0.1:8000/static/radio.mp3

# Intent detection
INTENT_THRESHOLD=0.7
SBERT_MODEL=sentence-transformers/paraphrase-MiniLM-L3-v2

# Embeddings
EMBED_MODEL=text-embedding-3-small
EMBEDDING_BACKEND=openai
VECTOR_STORE=qdrant
SIM_THRESHOLD=0.24
MEM_TOP_K=3

# Vector store
CHROMA_PATH=.chroma_data
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=gesahni_memories

# RAGFlow
RAGFLOW_URL=http://localhost:8001
RAGFLOW_COLLECTION=demo

# Translation
TRANSLATE_URL=http://localhost:5000

# Weather
OPENWEATHER_API_KEY=
CITY_NAME=Detroit,US

# Notes
NOTES_DB=notes.db

# Calendar
CALENDAR_FILE=data/calendar.json

# Upload limits
MAX_UPLOAD_BYTES=10485760

# Cache
DISABLE_QA_CACHE=false

# Strict mode
STRICT_VECTOR_STORE=0

# Monitoring
PROMETHEUS_ENABLED=1
OTEL_ENABLED=1

