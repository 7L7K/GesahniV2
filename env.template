# Environment Configuration Template
# Copy this file to .env.dev, .env.staging, or .env.prod and customize for your environment

# =============================================================================
# ENVIRONMENT-SPECIFIC CONFIGURATION
# =============================================================================

# Frontend and Backend URLs
# Frontend origin (used for post-login redirects)
APP_URL=http://localhost:3000
API_URL=http://localhost:8000

# CORS Configuration
CORS_ALLOW_ORIGINS=http://localhost:3000

# Cookie Security Configuration
COOKIE_SECURE=0
# ⚠️ CRITICAL: If COOKIE_SAMESITE=none, you MUST set COOKIE_SECURE=1 or browsers will reject cookies
COOKIE_SAMESITE=lax

# Authentication Mode
NEXT_PUBLIC_HEADER_AUTH_MODE=0

# =============================================================================
# BACKEND CONFIGURATION (inherited from env.example)
# =============================================================================

# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_TRANSCRIBE_MODEL=whisper-1
WHISPER_MODEL=whisper-1

# LLaMA / Ollama
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3:latest
OLLAMA_FORCE_IPV6=0
LLAMA_MAX_STREAMS=2

# Routing
DETERMINISTIC_ROUTER=1
ROUTER_RULES_PATH=router_rules.yaml
ALLOWED_GPT_MODELS=gpt-4o,gpt-4,gpt-3.5-turbo
ALLOWED_LLAMA_MODELS=llama3:latest,llama3
MODEL_ROUTER_HEAVY_WORDS=30
MODEL_ROUTER_HEAVY_TOKENS=1000

# Auth & security
# Choose ONE algorithm. Prefer HS256 for dev; RS256/ES256 for prod.
JWT_ALGS=HS256
# For HS256:
#   Generate: python scripts/jwt_tools.py hs256
JWT_SECRET=
# For RS/ES (prod):
#   Generate: python scripts/jwt_tools.py rs256
#   Paste JSON into:
# JWT_PRIVATE_KEYS={"kid1":"-----BEGIN PRIVATE KEY-----\n..."}
# JWT_PUBLIC_KEYS={"kid1":"-----BEGIN PUBLIC KEY-----\n..."}
JWT_EXPIRE_MINUTES=15
JWT_REFRESH_EXPIRE_MINUTES=43200
RATE_LIMIT_PER_MIN=60

# Development mode: forces Secure=false when scheme=http
# Default to 0 for stricter, production-like logging and behavior
DEV_MODE=0
# Rate limit backend: memory | redis
RATE_LIMIT_BACKEND=memory
# Optional: Redis URL for distributed sessions and rate limiting
# REDIS_URL=redis://localhost:6379/0
# Optional: override Redis key prefix for rate limit buckets
RATE_LIMIT_REDIS_PREFIX=rl
# Optional: bypass rate limits for requests carrying any of these scopes (space‑separated)
RATE_LIMIT_BYPASS_SCOPES=
# Optional: daily cap per user (resets midnight UTC). 0 disables.
DAILY_REQUEST_CAP=0
API_TOKEN=

# Server
# Allow credentials: false (header mode - not using cookies)
CORS_ALLOW_CREDENTIALS=false
PORT=8000
SESSIONS_DIR=sessions
ALBUM_ART_DIR=data/album_art

# Optional admin for /config
ADMIN_TOKEN=

# Home Assistant
HOME_ASSISTANT_URL=http://localhost:8123
HOME_ASSISTANT_TOKEN=

# Music / Providers
PROVIDER_SPOTIFY=true
MUSIC_FALLBACK_RADIO=false
EXPLICIT_DEFAULT=true
QUIET_HOURS_START=22:00
QUIET_HOURS_END=07:00
MUSIC_DB=music.db
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
# Optional: process-wide refresh token for single-user setups
SPOTIFY_REFRESH_TOKEN=
FALLBACK_RADIO_URL=http://localhost:8000/static/radio.mp3

# Intent detection
INTENT_THRESHOLD=0.7
SBERT_MODEL=sentence-transformers/paraphrase-MiniLM-L3-v2

# Embeddings
EMBED_MODEL=text-embedding-3-small
EMBEDDING_BACKEND=openai
VECTOR_STORE=chroma
SIM_THRESHOLD=0.24
MEM_TOP_K=3

# Vector store
CHROMA_PATH=.chroma_data
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=gesahni_memories

# RAGFlow
RAGFLOW_URL=http://localhost:8001
RAGFLOW_COLLECTION=demo

# Translation
TRANSLATE_URL=http://localhost:5000

# Weather
OPENWEATHER_API_KEY=
CITY_NAME=Detroit,US

# Notes
NOTES_DB=notes.db

# Calendar
CALENDAR_FILE=data/calendar.json

# Upload limits
MAX_UPLOAD_BYTES=10485760

# Cache
DISABLE_QA_CACHE=false

# Strict mode
STRICT_VECTOR_STORE=0

# Monitoring
PROMETHEUS_ENABLED=1
OTEL_ENABLED=1

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8000/v1/google/auth/callback
# Application URL (frontend origin for post-login redirects)
# If different from APP_URL above, set APP_URL explicitly.
# APP_URL=http://localhost:3000
# JWT secret used for application JWTs (see above for generation instructions)
# Separate secret to sign OAuth state cookies (recommended)
JWT_STATE_SECRET=
# Optional:
# GOOGLE_HD=
# GOOGLE_LOGIN_HINT=
